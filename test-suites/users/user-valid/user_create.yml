---
# Validates user creation with valid data.

authors:
  - Foo Bar

endpoint: /users

method: POST

requests:
  - '{"name": "fn ln", "username": "U1", "email": "e1@fx.local", "company": "fx", "jobTitle": "Engineer"}'
  - '{"name": "fn1 ln", "username": "U2", "email": "e1@fx.local", "company": "fx", "jobTitle": "Engineer"}'
  # optional name
  - '{"name": "", "username": "u1", "email": "e1@fx.local", "company": "fx", "jobTitle": "Engineer"}'
  - '{"name": " ", "username": "u1", "email": "e1@fx.local", "company": "fx", "jobTitle": "Engineer"}'
  # optional company
  - '{"name": "", "username": "u1", "email": "e1@fx.local", "company": " ", "jobTitle": "Engineer"}'
  - '{"name": " ", "username": "u1", "email": "e1@fx.local", "company": "", "jobTitle": "Engineer"}'
  - '{"name": "fn1 ln", "username": "u1", "email": "e1@fx.local", "company": " ", "jobTitle": "Engineer"}'
  - '{"name": "fn1 ln", "username": "u1", "email": "e1@fx.local", "company": "", "jobTitle": "Engineer"}'
  # optional jobTitle
  - '{"name": "", "username": "u1", "email": "e1@fx.local", "company": " ", "jobTitle": ""}'
  - '{"name": " ", "username": "u1", "email": "e1@fx.local", "company": "", "jobTitle": " "}'
  - '{"name": "fn1 ln", "username": "u1", "email": "e1@fx.local", "company": " ", "jobTitle": ""}'
  - '{"name": "fn1 ln", "username": "u1", "email": "e1@fx.local", "company": "", "jobTitle": " "}'

assertions:
  - "@StatusCode == 200"
  #- "@Response != null"
  - "@Response.errors == false"
  - "@Response.data.name == @Request.name"
  - "@Response.data.username ==IgnoreCase @Request.username"
  - "@Response.data.email == @Request.email"
  - "@Response.data.company == @Request.company"
  - "@Response.data.jobTitle == @Request.jobTitle"
  # - "@Response.data.salary >= 90000"
  # - "@Response.data.age <= 40"

cleanup:
  - user_delete

policies:
  initExec: Request
  cleanupExec: Request

tags:
  - SANDBOX
