---
# Validates project creation with valid data.

authors:
  - Intesar Mohammed

endpoint: /projects

method: POST

requests:
  - '{
        "name": "Fx-App1",
        "description": "SD-Test example",
        "licenses": [
          "APACHE LICENSE, VERSION 2.0"
        ],
        "environments": [
          {
            "name": "Default",
            "description": null,
            "baseUrl": "http://localhost:8080/api/v1",
            "auths": [
              {
                "name": "Default",
                "authType": "BASIC",
                "username": "user1",
                "password": "user1"
              }
            ]
          }
        ],
        "jobs": [
          {
            "name": "Default",
            "description": null,
            "environment": "Default",
            "tags": [
              "V1"
            ],
            "region": "fx-default-region"
          }
        ]
      }'
  # description empty
  - '{
        "name": "Fx-App2",
        "licenses": [
          "APACHE LICENSE, VERSION 2.0"
        ],
        "environments": [
          {
            "name": "Default",
            "description": null,
            "baseUrl": "http://localhost:8080/api/v1",
            "auths": [
              {
                "name": "Default",
                "authType": "BASIC",
                "username": "user1",
                "password": "user1"
              }
            ]
          }
        ],
        "jobs": [
          {
            "name": "Default",
            "description": null,
            "environment": "Default",
            "tags": [
              "V1"
            ],
            "region": "fx-default-region"
          }
        ]
      }'
  # License empty
  - '{
        "name": "Fx-App1",
        "description": "SD-Test example",
        "environments": [
          {
            "name": "Default",
            "description": null,
            "baseUrl": "http://localhost:8080/api/v1",
            "auths": [
              {
                "name": "Default",
                "authType": "BASIC",
                "username": "user1",
                "password": "user1"
              }
            ]
          }
        ],
        "jobs": [
          {
            "name": "Default",
            "description": null,
            "environment": "Default",
            "tags": [
              "V1"
            ],
            "region": "fx-default-region"
          }
        ]
      }'
  # No auth
  - '{
        "name": "Fx-App1",
        "description": "SD-Test example",
        "licenses": [
          "APACHE LICENSE, VERSION 2.0"
        ],
        "environments": [
          {
            "name": "Default",
            "description": null,
            "baseUrl": "http://localhost:8080/api/v1"
          }
        ],
        "jobs": [
          {
            "name": "Default",
            "description": null,
            "environment": "Default",
            "tags": [
              "V1"
            ],
            "region": "fx-default-region"
          }
        ]
      }'
  - '{
        "name": "Fx-App1",
        "description": "SD-Test example",
        "licenses": [
          "APACHE LICENSE, VERSION 2.0"
        ],
        "environments": [
          {
            "name": "Default",
            "description": null,
            "baseUrl": "http://localhost:8080/api/v1",
            "auths": [
              {
                "name": "Default",
                "authType": "BASIC",
                "username": "user1",
                "password": "user1"
              }
            ]
          }
        ],
        "jobs": [
          {
            "name": "Default",
            "description": null,
            "environment": "Default",
            "tags": [
              "V1"
            ],
            "region": "fx-default-region"
          }
        ]
      }'
assertions:
  - "@StatusCode == 200"
  - "@Response.errors == false"
  - "@Response.data.name == @Request.name"

cleanup:
  - project_delete

tags:
  - SANDBOX
